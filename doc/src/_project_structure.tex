\section{Struktura projektu}
Jazyk IFJ17 je podmnožinou jazyka Free Basic. Jazyk není case-sensitiove,
což znamená že nerozlišuje malá a velká písmena. Je jazykem staticky typovaným.
\subsection{Lexikální analýza}
Lexikální analyzátor je implementací deterministického konečného
automatu. Jeho úlohou je rozpoznávat jazykové lexémy a reprezentovat
je jako tokeny.

Lexikální analyzátor je rozdělen do tří modulů: \ic|lexer.c|, \ic|lexer_fsm.c| a \ic|token.c|
. Modul \ic|token.c| obsahuje implementaci abstraktního datového typu token. Modul \ic|lexer_fsm.c|
obsahuje implementaci deterministického konečného automatu. Modul \ic|lexer.c| poskytuje funkci
\ic|lexer_next_token|, která řídí činnost deterministického konečného automatu a
která vrací další token.

\subsection{Synataktická analýza}
Naším úkolem bylo implementovat syntaxí řízený překlad. To znamená
že syntaktická analýza řídí činnost překladače.

Pro syntaktickou analýzu programu jako celku byla použita syntaktická
analýza shora dolů, konkrétně metoda rekurzivního sestupu. Implementace se nachází v modulu \ic|parser.c|

Pro analýzu výrazů není analýza shora dolů příliš vhodná, proto byla
použita metoda zdola nahorů v našem případě založená na precedenční
syntaktické analýza implementovaná v souboru \ic|parser_expr.c|.

Přepínání mezi metodami je realizováno následujícím mechanismem. Na celý program je použita funkce \ic|parser_parse|
z modulu \ic|parser.c|. V případě že je jako neterminál očekáván výraz, je volána funkce \ic|parser_parse_expr|
z modulu \ic|parser_expr.c|, která provede precedenční syntaktickou analýzu výrazu.

\subsection{Precedenční analýza výrazů}
\todo{Describe a case-by-case analysis}
\subsection{Konstruktor kódu}
Konstruktor cílového kódu je komponenta překladače, která má za odpovědnost smysl a jednotlivé návaznosti vygenerovaného tříadresného kódu.

Implementačně je založen na struktuře \ic|CodeConstructor|, obsahující pomocnou komponentu generátoru \ic|CodeGenerator|. Dále obsahuje následující položky: 
\begin{description}[style=nextline]
	\item[zásobník návěští]
		\todo{je vůbec potřeba?}
	\item[zásobník návěští pro podmínky]
		Slouží pro uchování cílů skoků mezi jednotlivými větvemi podmínkového příkazu \ic|IF .. THEN|, \ic|ELSEIF ... THEN| a \ic|ELSE|.
	\item[zásobník návěští pro cykly]
		Obdobně jako záasobník pro podmínkové návěští, slouží tento zásobník pro uschování vygenerovaných návěští pro skoky na podmínku cyklu či mimo cyklus.
	\item[aktuální hloubku zanoření \texttt{SCOPE}]
		Určuje hlavní \ic|SCOPE| celého programu, podle které je poté generován cíl skoku do hlavního programu a vytvoření lokálního rámce.
	\item[zásobník počátečních instrukcí cyklu]
		Je určen pro uschování počátečních instrukcí cyklů \ic|LABEL|, které slouží jako zarážky pro vygenerování instrukcí před začátek bloku cyklu. Tedy například vygenerování instrukcí \ic|DEFVAR| před tělo cyklu - pro zamezení duplicitní definice. 
	\item[hloubka zanoření řídících struktur]
		Definuje čítač pro automatické generování sekvence návěští pro cykly, podmínky, funkce a další použití.
	\item[seznam implicitních konverzí]
		Pomocný seznam typů instrukcí používaných pro konkrétní implicitní konverze operandů - je nutný pro plně automatickou kontrolu implicitních konverzí včetně generování konverzních instrukcí.
	\item[čítač vygenerovaných návěští]
		Interní čítač určený pro unikátní odlišení všech vygenerovaných instrukcí v rámci programu.
\end{description}

\subsection{Generátor cílového kódu}
Generátor kódu je nízkoúrovňová komponenta zastřešující skládání, validaci a vykreslování cílového kódu \ic|IFJcode17|. Kontroluje generované instrukce a její operandy, tedy správné kombinace typů operandů (přístupy do rámců, konstatní literály, návěští či datové typy) u konkrétních instrukcí. 

Interní implementace spoléhá na \emph{obousměrně svázaný lineární seznam} struktur \ic|CodeInstruction|, které kromě režijních ukazatelů uchovávají typ instrukce a ukazatele na až tři operandy, struktury \ic|CodeInstructionOperand|. Tento seznam je uložen v datové struktuře \ic|CodeGenerator|, která dále obsahuje pole podpisů\footnote{Podpis instrukce je složena z bitových masek definující povolené typy operandů a její textové reprezentace v kódu \texttt{IFJcode17}.} instrukcí pro jejich validace.
Struktura \ic|CodeInstructionOperand| uchovává informace o svém typu a poté unii dat pro konkrétní typ operandu, tedy ukazatel na proměnnou \ic|SymbolVariable|, data konstanty \ic|CodeInstructionOperandConstantData| v unii s datovým typem nebo řetězec uchovávající název návěští.

\subsection{Interpret}
\todo{Describe something about interpret}
